EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title "Oxygen concentrator - solenoid valve controller"
Date "2021-03-24"
Rev "1"
Comp "S. Aoki"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L power:+12V #PWR01
U 1 1 6054CB30
P 3800 1900
F 0 "#PWR01" H 3800 1750 50  0001 C CNN
F 1 "+12V" H 3815 2073 50  0000 C CNN
F 2 "" H 3800 1900 50  0001 C CNN
F 3 "" H 3800 1900 50  0001 C CNN
	1    3800 1900
	1    0    0    -1  
$EndComp
$Comp
L Device:L L1
U 1 1 6054D17E
P 4050 2250
F 0 "L1" H 4102 2296 50  0000 L CNN
F 1 "4/3VALVE" H 4102 2205 50  0000 L CNN
F 2 "" H 4050 2250 50  0001 C CNN
F 3 "~" H 4050 2250 50  0001 C CNN
	1    4050 2250
	1    0    0    -1  
$EndComp
$Comp
L Device:R R1
U 1 1 6054E33C
P 3200 2750
F 0 "R1" V 2993 2750 50  0000 C CNN
F 1 "100" V 3084 2750 50  0000 C CNN
F 2 "" V 3130 2750 50  0001 C CNN
F 3 "~" H 3200 2750 50  0001 C CNN
	1    3200 2750
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR03
U 1 1 6054EDAE
P 3800 3200
F 0 "#PWR03" H 3800 2950 50  0001 C CNN
F 1 "GND" H 3805 3027 50  0000 C CNN
F 2 "" H 3800 3200 50  0001 C CNN
F 3 "" H 3800 3200 50  0001 C CNN
	1    3800 3200
	1    0    0    -1  
$EndComp
Wire Wire Line
	3800 3200 3800 3100
Wire Wire Line
	3800 3100 3500 3100
Connection ~ 3800 3100
Wire Wire Line
	3600 2100 3600 1950
Wire Wire Line
	4050 2400 4050 2550
Wire Wire Line
	4050 2100 4050 1950
Wire Wire Line
	3600 1950 3800 1950
Wire Wire Line
	3800 1900 3800 1950
Connection ~ 3800 1950
Wire Wire Line
	3800 1950 4050 1950
Text GLabel 2900 2750 0    50   Input ~ 0
PWM1(3.5V)
Wire Wire Line
	2900 2750 3050 2750
Wire Wire Line
	3500 3100 3500 3050
Wire Wire Line
	3800 3100 3800 2950
$Comp
L Device:R R3
U 1 1 6054E7F0
P 3500 2900
F 0 "R3" H 3570 2946 50  0000 L CNN
F 1 "10k" H 3570 2855 50  0000 L CNN
F 2 "" V 3430 2900 50  0001 C CNN
F 3 "~" H 3500 2900 50  0001 C CNN
	1    3500 2900
	1    0    0    -1  
$EndComp
Wire Wire Line
	3500 2750 3350 2750
Wire Wire Line
	3800 2550 4050 2550
Connection ~ 3800 2550
Connection ~ 3500 2750
$Comp
L Transistor_FET:BS170 Q1
U 1 1 6054BBD6
P 3700 2750
F 0 "Q1" H 3904 2796 50  0000 L CNN
F 1 "BS170" H 3904 2705 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-92_Inline" H 3900 2675 50  0001 L CIN
F 3 "https://www.onsemi.com/pub/Collateral/BS170-D.PDF" H 3700 2750 50  0001 L CNN
	1    3700 2750
	1    0    0    -1  
$EndComp
$Comp
L Device:D D1
U 1 1 6054DAE1
P 3600 2250
F 0 "D1" V 3550 2050 50  0000 L CNN
F 1 "1N4001/4007" V 3650 1600 50  0000 L CNN
F 2 "" H 3600 2250 50  0001 C CNN
F 3 "~" H 3600 2250 50  0001 C CNN
	1    3600 2250
	0    1    1    0   
$EndComp
Wire Wire Line
	3600 2550 3800 2550
Wire Wire Line
	3600 2550 3600 2400
Text Notes 1950 1100 0    50   ~ 0
Note\n1) PWM output is determined by the experiment
$Comp
L power:+12V #PWR02
U 1 1 605BAF83
P 6200 1950
F 0 "#PWR02" H 6200 1800 50  0001 C CNN
F 1 "+12V" H 6215 2123 50  0000 C CNN
F 2 "" H 6200 1950 50  0001 C CNN
F 3 "" H 6200 1950 50  0001 C CNN
	1    6200 1950
	1    0    0    -1  
$EndComp
$Comp
L Device:L L2
U 1 1 605BAF89
P 6450 2300
F 0 "L2" H 6502 2346 50  0000 L CNN
F 1 "4/3VALVE" H 6502 2255 50  0000 L CNN
F 2 "" H 6450 2300 50  0001 C CNN
F 3 "~" H 6450 2300 50  0001 C CNN
	1    6450 2300
	1    0    0    -1  
$EndComp
$Comp
L Device:R R2
U 1 1 605BAF8F
P 5600 2800
F 0 "R2" V 5393 2800 50  0000 C CNN
F 1 "100" V 5484 2800 50  0000 C CNN
F 2 "" V 5530 2800 50  0001 C CNN
F 3 "~" H 5600 2800 50  0001 C CNN
	1    5600 2800
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR04
U 1 1 605BAF95
P 6200 3250
F 0 "#PWR04" H 6200 3000 50  0001 C CNN
F 1 "GND" H 6205 3077 50  0000 C CNN
F 2 "" H 6200 3250 50  0001 C CNN
F 3 "" H 6200 3250 50  0001 C CNN
	1    6200 3250
	1    0    0    -1  
$EndComp
Wire Wire Line
	6200 3250 6200 3150
Wire Wire Line
	6200 3150 5900 3150
Connection ~ 6200 3150
Wire Wire Line
	6000 2150 6000 2000
Wire Wire Line
	6450 2450 6450 2600
Wire Wire Line
	6450 2150 6450 2000
Wire Wire Line
	6000 2000 6200 2000
Wire Wire Line
	6200 1950 6200 2000
Connection ~ 6200 2000
Wire Wire Line
	6200 2000 6450 2000
Text GLabel 5300 2800 0    50   Input ~ 0
PWM2(3.5V)
Wire Wire Line
	5300 2800 5450 2800
Wire Wire Line
	5900 3150 5900 3100
Wire Wire Line
	6200 3150 6200 3000
$Comp
L Device:R R4
U 1 1 605BAFA9
P 5900 2950
F 0 "R4" H 5970 2996 50  0000 L CNN
F 1 "10k" H 5970 2905 50  0000 L CNN
F 2 "" V 5830 2950 50  0001 C CNN
F 3 "~" H 5900 2950 50  0001 C CNN
	1    5900 2950
	1    0    0    -1  
$EndComp
Wire Wire Line
	5900 2800 5750 2800
Wire Wire Line
	6200 2600 6450 2600
Connection ~ 6200 2600
Connection ~ 5900 2800
$Comp
L Transistor_FET:BS170 Q2
U 1 1 605BAFB3
P 6100 2800
F 0 "Q2" H 6304 2846 50  0000 L CNN
F 1 "BS170" H 6304 2755 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-92_Inline" H 6300 2725 50  0001 L CIN
F 3 "https://www.onsemi.com/pub/Collateral/BS170-D.PDF" H 6100 2800 50  0001 L CNN
	1    6100 2800
	1    0    0    -1  
$EndComp
$Comp
L Device:D D2
U 1 1 605BAFB9
P 6000 2300
F 0 "D2" V 5950 2100 50  0000 L CNN
F 1 "1N4001/4007" V 6050 1650 50  0000 L CNN
F 2 "" H 6000 2300 50  0001 C CNN
F 3 "~" H 6000 2300 50  0001 C CNN
	1    6000 2300
	0    1    1    0   
$EndComp
Wire Wire Line
	6000 2600 6200 2600
Wire Wire Line
	6000 2600 6000 2450
$Comp
L power:+12V #PWR05
U 1 1 605BD922
P 3800 3950
F 0 "#PWR05" H 3800 3800 50  0001 C CNN
F 1 "+12V" H 3815 4123 50  0000 C CNN
F 2 "" H 3800 3950 50  0001 C CNN
F 3 "" H 3800 3950 50  0001 C CNN
	1    3800 3950
	1    0    0    -1  
$EndComp
$Comp
L Device:L L3
U 1 1 605BD928
P 4050 4300
F 0 "L3" H 4102 4346 50  0000 L CNN
F 1 "4/3VALVE" H 4102 4255 50  0000 L CNN
F 2 "" H 4050 4300 50  0001 C CNN
F 3 "~" H 4050 4300 50  0001 C CNN
	1    4050 4300
	1    0    0    -1  
$EndComp
$Comp
L Device:R R5
U 1 1 605BD92E
P 3200 4800
F 0 "R5" V 2993 4800 50  0000 C CNN
F 1 "100" V 3084 4800 50  0000 C CNN
F 2 "" V 3130 4800 50  0001 C CNN
F 3 "~" H 3200 4800 50  0001 C CNN
	1    3200 4800
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR07
U 1 1 605BD934
P 3800 5250
F 0 "#PWR07" H 3800 5000 50  0001 C CNN
F 1 "GND" H 3805 5077 50  0000 C CNN
F 2 "" H 3800 5250 50  0001 C CNN
F 3 "" H 3800 5250 50  0001 C CNN
	1    3800 5250
	1    0    0    -1  
$EndComp
Wire Wire Line
	3800 5250 3800 5150
Wire Wire Line
	3800 5150 3500 5150
Connection ~ 3800 5150
Wire Wire Line
	3600 4150 3600 4000
Wire Wire Line
	4050 4450 4050 4600
Wire Wire Line
	4050 4150 4050 4000
Wire Wire Line
	3600 4000 3800 4000
Wire Wire Line
	3800 3950 3800 4000
Connection ~ 3800 4000
Wire Wire Line
	3800 4000 4050 4000
Text GLabel 2900 4800 0    50   Input ~ 0
PWM3(3.5V)
Wire Wire Line
	2900 4800 3050 4800
Wire Wire Line
	3500 5150 3500 5100
Wire Wire Line
	3800 5150 3800 5000
$Comp
L Device:R R7
U 1 1 605BD948
P 3500 4950
F 0 "R7" H 3570 4996 50  0000 L CNN
F 1 "10k" H 3570 4905 50  0000 L CNN
F 2 "" V 3430 4950 50  0001 C CNN
F 3 "~" H 3500 4950 50  0001 C CNN
	1    3500 4950
	1    0    0    -1  
$EndComp
Wire Wire Line
	3500 4800 3350 4800
Wire Wire Line
	3800 4600 4050 4600
Connection ~ 3800 4600
Connection ~ 3500 4800
$Comp
L Transistor_FET:BS170 Q3
U 1 1 605BD952
P 3700 4800
F 0 "Q3" H 3904 4846 50  0000 L CNN
F 1 "BS170" H 3904 4755 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-92_Inline" H 3900 4725 50  0001 L CIN
F 3 "https://www.onsemi.com/pub/Collateral/BS170-D.PDF" H 3700 4800 50  0001 L CNN
	1    3700 4800
	1    0    0    -1  
$EndComp
$Comp
L Device:D D3
U 1 1 605BD958
P 3600 4300
F 0 "D3" V 3550 4100 50  0000 L CNN
F 1 "1N4001/4007" V 3650 3650 50  0000 L CNN
F 2 "" H 3600 4300 50  0001 C CNN
F 3 "~" H 3600 4300 50  0001 C CNN
	1    3600 4300
	0    1    1    0   
$EndComp
Wire Wire Line
	3600 4600 3800 4600
Wire Wire Line
	3600 4600 3600 4450
$Comp
L power:+12V #PWR06
U 1 1 605C0222
P 6200 4000
F 0 "#PWR06" H 6200 3850 50  0001 C CNN
F 1 "+12V" H 6215 4173 50  0000 C CNN
F 2 "" H 6200 4000 50  0001 C CNN
F 3 "" H 6200 4000 50  0001 C CNN
	1    6200 4000
	1    0    0    -1  
$EndComp
$Comp
L Device:L L4
U 1 1 605C0228
P 6450 4350
F 0 "L4" H 6502 4396 50  0000 L CNN
F 1 "4/3VALVE" H 6502 4305 50  0000 L CNN
F 2 "" H 6450 4350 50  0001 C CNN
F 3 "~" H 6450 4350 50  0001 C CNN
	1    6450 4350
	1    0    0    -1  
$EndComp
$Comp
L Device:R R6
U 1 1 605C022E
P 5600 4850
F 0 "R6" V 5393 4850 50  0000 C CNN
F 1 "100" V 5484 4850 50  0000 C CNN
F 2 "" V 5530 4850 50  0001 C CNN
F 3 "~" H 5600 4850 50  0001 C CNN
	1    5600 4850
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR08
U 1 1 605C0234
P 6200 5300
F 0 "#PWR08" H 6200 5050 50  0001 C CNN
F 1 "GND" H 6205 5127 50  0000 C CNN
F 2 "" H 6200 5300 50  0001 C CNN
F 3 "" H 6200 5300 50  0001 C CNN
	1    6200 5300
	1    0    0    -1  
$EndComp
Wire Wire Line
	6200 5300 6200 5200
Wire Wire Line
	6200 5200 5900 5200
Connection ~ 6200 5200
Wire Wire Line
	6000 4200 6000 4050
Wire Wire Line
	6450 4500 6450 4650
Wire Wire Line
	6450 4200 6450 4050
Wire Wire Line
	6000 4050 6200 4050
Wire Wire Line
	6200 4000 6200 4050
Connection ~ 6200 4050
Wire Wire Line
	6200 4050 6450 4050
Text GLabel 5300 4850 0    50   Input ~ 0
PWM4(3.5V)
Wire Wire Line
	5300 4850 5450 4850
Wire Wire Line
	5900 5200 5900 5150
Wire Wire Line
	6200 5200 6200 5050
$Comp
L Device:R R8
U 1 1 605C0248
P 5900 5000
F 0 "R8" H 5970 5046 50  0000 L CNN
F 1 "10k" H 5970 4955 50  0000 L CNN
F 2 "" V 5830 5000 50  0001 C CNN
F 3 "~" H 5900 5000 50  0001 C CNN
	1    5900 5000
	1    0    0    -1  
$EndComp
Wire Wire Line
	5900 4850 5750 4850
Wire Wire Line
	6200 4650 6450 4650
Connection ~ 6200 4650
Connection ~ 5900 4850
$Comp
L Transistor_FET:BS170 Q4
U 1 1 605C0252
P 6100 4850
F 0 "Q4" H 6304 4896 50  0000 L CNN
F 1 "BS170" H 6304 4805 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-92_Inline" H 6300 4775 50  0001 L CIN
F 3 "https://www.onsemi.com/pub/Collateral/BS170-D.PDF" H 6100 4850 50  0001 L CNN
	1    6100 4850
	1    0    0    -1  
$EndComp
$Comp
L Device:D D4
U 1 1 605C0258
P 6000 4350
F 0 "D4" V 5950 4150 50  0000 L CNN
F 1 "1N4001/4007" V 6050 3700 50  0000 L CNN
F 2 "" H 6000 4350 50  0001 C CNN
F 3 "~" H 6000 4350 50  0001 C CNN
	1    6000 4350
	0    1    1    0   
$EndComp
Wire Wire Line
	6000 4650 6200 4650
Wire Wire Line
	6000 4650 6000 4500
$EndSCHEMATC
